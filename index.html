<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>SPBE-DevOps Academy - Platform Pembelajaran Interaktif</title>
        <meta name="description" content="Platform pembelajaran interaktif untuk PNS Pranata Komputer dengan kurikulum DevOps dan SPBE">
        <meta name="keywords" content="SPBE, DevOps, Pranata Komputer, PNS, Diskominfo, Aceh Tengah">
        <meta name="author" content="Diskominfo Kabupaten Aceh Tengah">
        
        <!-- Open Graph Meta Tags -->
        <meta property="og:title" content="SPBE-DevOps Academy">
        <meta property="og:description" content="Platform pembelajaran interaktif untuk PNS Pranata Komputer">
        <meta property="og:type" content="website">
        <meta property="og:url" content="">
        <meta property="og:image" content="">
        
        <!-- Twitter Card Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="SPBE-DevOps Academy">
        <meta name="twitter:description" content="Platform pembelajaran interaktif untuk PNS Pranata Komputer">
        <meta name="twitter:image" content="">
        
        <!-- Favicon -->
        <link rel="icon" type="image/x-icon" href="/favicon.ico">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
        
        <!-- Preconnect to external domains -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://cdn.jsdelivr.net">
        
        <!-- Supabase CDN -->
        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
        
        <!-- Chart.js for analytics -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        
        <!-- Font Awesome for icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="components/auth.css">
        <link rel="stylesheet" href="components/notifications.css">
        <link rel="stylesheet" href="components/video.css">
    </head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>SPBE-DevOps Academy</h1>
                <p class="nav-subtitle">Diskominfo Kabupaten Aceh Tengah</p>
            </div>
            <div class="nav-menu">
                <button class="nav-link" onclick="app.showView('dashboard')">Dashboard</button>
                <button class="nav-link" onclick="app.showView('resources')">Resources</button>
                <button class="nav-link" onclick="app.showView('progress')">Progress</button>
                <button class="nav-link" onclick="app.showView('certificates')">Sertifikat</button>
                
                <!-- Auth Buttons -->
                <div id="auth-buttons" class="auth-buttons">
                    <button class="btn btn--outline btn--sm" onclick="app.showLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> Masuk
                    </button>
                    <button class="btn btn--primary btn--sm" onclick="app.showRegisterModal()">
                        <i class="fas fa-user-plus"></i> Daftar
                    </button>
                </div>
                
                <!-- User Menu -->
                <div id="user-menu" class="user-menu" style="display: none;">
                    <button class="user-menu-toggle" onclick="app.toggleUserDropdown()">
                        <div id="user-avatar" class="user-avatar">U</div>
                        <span id="user-name">User</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div id="user-dropdown" class="user-dropdown">
                        <a href="#" onclick="app.showView('profile')">
                            <i class="fas fa-user"></i> Profil
                        </a>
                        <a href="#" onclick="app.showView('certificates')">
                            <i class="fas fa-certificate"></i> Sertifikat Saya
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" onclick="app.handleSignOut()">
                            <i class="fas fa-sign-out-alt"></i> Keluar
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
            <div class="hero-section">
                <h2>Selamat Datang di Platform Pembelajaran Interaktif</h2>
                <p class="hero-description">Platform pembelajaran untuk PNS Pranata Komputer Terampil (Golongan II/c) dengan dua jalur kurikulum komprehensif</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-content">
                        <h3 id="stats-modules">0</h3>
                        <p>Modul Diselesaikan</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <h3 id="stats-quizzes">0</h3>
                        <p>Quiz Dikerjakan</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üéØ</div>
                    <div class="stat-content">
                        <h3 id="stats-progress">0%</h3>
                        <p>Progress Keseluruhan</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üèÜ</div>
                    <div class="stat-content">
                        <h3 id="stats-badges">0</h3>
                        <p>Badge Diperoleh</p>
                    </div>
                </div>
            </div>

            <div class="curriculum-section">
                <h3>Pilih Jalur Kurikulum</h3>
                <div class="curriculum-cards">
                    <div class="curriculum-card devops" onclick="app.selectCurriculum('devops')">
                        <div class="curriculum-header">
                            <span class="curriculum-icon">‚öôÔ∏è</span>
                            <h4>DevOps Engineer</h4>
                        </div>
                        <p class="curriculum-description">Fokus Database SPBE, clustering, dan high availability</p>
                        <div class="curriculum-meta">
                            <span>üìä 10 Modul</span>
                            <span>‚è±Ô∏è 12-21 bulan</span>
                        </div>
                        <button class="btn btn--primary btn--full-width">Mulai Pembelajaran</button>
                    </div>

                    <div class="curriculum-card spbe" onclick="app.selectCurriculum('spbe')">
                        <div class="curriculum-header">
                            <span class="curriculum-icon">üìà</span>
                            <h4>Penggiat Penilaian Indeks SPBE</h4>
                        </div>
                        <p class="curriculum-description">Fokus audit, mapping, dan peningkatan indeks SPBE</p>
                        <div class="curriculum-meta">
                            <span>üìä 10 Modul</span>
                            <span>‚è±Ô∏è 8-12 bulan</span>
                        </div>
                        <button class="btn btn--primary btn--full-width">Mulai Pembelajaran</button>
                    </div>
                </div>
            </div>

            <div class="recent-activity" id="recent-activity">
                <h3>Aktivitas Terakhir</h3>
                <div class="activity-list">
                    <p class="no-activity">Belum ada aktivitas. Mulai pembelajaran untuk melihat progress Anda!</p>
                </div>
            </div>
        </div>

        <!-- Curriculum View -->
        <div id="curriculum-view" class="view">
            <div class="view-header">
                <button class="btn btn--secondary" onclick="app.showView('dashboard')">‚Üê Kembali</button>
                <div>
                    <h2 id="curriculum-title"></h2>
                    <p id="curriculum-description"></p>
                </div>
            </div>

            <div class="levels-container" id="levels-container">
                <!-- Levels will be dynamically generated -->
            </div>
        </div>

        <!-- Module View -->
        <div id="module-view" class="view">
            <div class="view-header">
                <button class="btn btn--secondary" onclick="app.backToCurriculum()">‚Üê Kembali ke Kurikulum</button>
            </div>

            <div class="module-content">
                <div class="module-header">
                    <h2 id="module-title"></h2>
                    <span id="module-duration" class="duration-badge"></span>
                </div>

                <div class="module-body">
                    <div class="module-section">
                        <h3>üìñ Deskripsi</h3>
                        <p id="module-description"></p>
                    </div>

                    <div class="module-section">
                        <h3>üé• Video Pembelajaran</h3>
                        <div id="video-container"></div>
                        <div id="video-playlist"></div>
                    </div>

                    <div class="module-section">
                        <h3>üõ†Ô∏è Tools &amp; Software</h3>
                        <div id="module-tools" class="tools-list"></div>
                    </div>

                    <div class="module-section">
                        <h3>üíº Proyek Implementasi</h3>
                        <div class="project-box">
                            <p id="module-project"></p>
                        </div>
                    </div>

                    <div class="module-actions">
                        <button class="btn btn--primary" onclick="app.startQuiz()">üéØ Mulai Quiz</button>
                        <button class="btn btn--outline" onclick="app.markModuleComplete()">‚úÖ Tandai Selesai</button>
                    </div>

                    <div class="module-progress">
                        <p>Progress Modul</p>
                        <div class="progress-bar">
                            <div id="module-progress-fill" class="progress-fill"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress View -->
        <div id="progress-view" class="view">
            <div class="view-header">
                <h2>Progress &amp; Sertifikasi</h2>
                <div class="progress-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="overall-progress">0%</span>
                        <span class="stat-label">Progress Total</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="study-streak">0</span>
                        <span class="stat-label">Hari Berturut-turut</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="study-time">0j</span>
                        <span class="stat-label">Waktu Belajar</span>
                    </div>
                </div>
            </div>

            <div class="progress-summary">
                <div class="progress-card">
                    <h3>Kurikulum DevOps Engineer</h3>
                    <div class="level-progress">
                        <div class="level-item">
                            <span>Basic (Operator)</span>
                            <div class="progress-bar">
                                <div id="devops-basic-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span id="devops-basic-percent">0%</span>
                        </div>
                        <div class="level-item">
                            <span>Intermediate (Implementor)</span>
                            <div class="progress-bar">
                                <div id="devops-intermediate-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span id="devops-intermediate-percent">0%</span>
                        </div>
                        <div class="level-item">
                            <span>Advanced/Professional</span>
                            <div class="progress-bar">
                                <div id="devops-advanced-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span id="devops-advanced-percent">0%</span>
                        </div>
                    </div>
                </div>

                <div class="progress-card">
                    <h3>Kurikulum SPBE</h3>
                    <div class="level-progress">
                        <div class="level-item">
                            <span>Basic (Familiarization)</span>
                            <div class="progress-bar">
                                <div id="spbe-basic-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span id="spbe-basic-percent">0%</span>
                        </div>
                        <div class="level-item">
                            <span>Intermediate (Audit &amp; Mapping)</span>
                            <div class="progress-bar">
                                <div id="spbe-intermediate-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span id="spbe-intermediate-percent">0%</span>
                        </div>
                        <div class="level-item">
                            <span>Advanced/Professional</span>
                            <div class="progress-bar">
                                <div id="spbe-advanced-progress" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <span id="spbe-advanced-percent">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="badges-section">
                <h3>üèÜ Badge &amp; Sertifikasi</h3>
                <div class="badges-grid" id="badges-grid">
                    <!-- Badges will be dynamically generated -->
                </div>
            </div>

            <div class="recommendations-section">
                <h3>üìå Rekomendasi Modul Berikutnya</h3>
                <div id="recommendations" class="recommendations-list">
                    <p>Mulai pembelajaran untuk mendapatkan rekomendasi!</p>
                </div>
            </div>
        </div>

        <!-- Certificates View -->
        <div id="certificates-view" class="view">
            <div class="view-header">
                <h2>Sertifikat Saya</h2>
                <button class="btn btn--primary" onclick="certificateManager.showAllCertificates()">
                    <i class="fas fa-plus"></i> Lihat Semua Sertifikat
                </button>
            </div>

            <div class="certificates-grid" id="certificates-grid">
                <!-- Certificates will be dynamically loaded -->
                <div class="empty-state">
                    <i class="fas fa-certificate"></i>
                    <h3>Belum Ada Sertifikat</h3>
                    <p>Selesaikan semua modul dan quiz dalam satu level untuk mendapatkan sertifikat.</p>
                    <button class="btn btn--primary" onclick="app.showView('dashboard')">
                        Mulai Belajar
                    </button>
                </div>
            </div>
        </div>

        <!-- Profile View -->
        <div id="profile-view" class="view">
            <div class="view-header">
                <h2>Profil Saya</h2>
                <button class="btn btn--outline" onclick="authManager.showEditProfileModal()">
                    <i class="fas fa-edit"></i> Edit Profil
                </button>
            </div>

            <div class="profile-content">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="profile-info">
                        <h3 id="profile-full-name">Loading...</h3>
                        <p id="profile-email">Loading...</p>
                        <div class="profile-details">
                            <div class="detail-item">
                                <span class="detail-label">NIP:</span>
                                <span id="profile-nip">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Jabatan:</span>
                                <span id="profile-jabatan">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">Unit Kerja:</span>
                                <span id="profile-unit">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="profile-stats">
                    <h3>Statistik Pembelajaran</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-book"></i>
                            <span id="profile-modules-completed">0</span>
                            <p>Modul Selesai</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-trophy"></i>
                            <span id="profile-certificates-earned">0</span>
                            <p>Sertifikat Diperoleh</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <span id="profile-study-hours">0</span>
                            <p>Jam Belajar</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-fire"></i>
                            <span id="profile-current-streak">0</span>
                            <p>Hari Beruntun</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources View -->
        <div id="resources-view" class="view">
            <div class="view-header">
                <h2>üìö Resources Library</h2>
                <p>Koleksi lengkap tools, dokumentasi, dan referensi pembelajaran</p>
            </div>

            <div class="resources-grid">
                <div class="resource-category">
                    <h3>üóÑÔ∏è Database Tools</h3>
                    <ul class="resource-list">
                        <li>
                            <a href="https://www.postgresql.org/docs/" target="_blank">
                                <strong>PostgreSQL Official</strong>
                                <span class="resource-type">Documentation</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.pgadmin.org/" target="_blank">
                                <strong>pgAdmin</strong>
                                <span class="resource-type">Tool</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://dbeaver.io/" target="_blank">
                                <strong>DBeaver</strong>
                                <span class="resource-type">Tool</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="resource-category">
                    <h3>‚öôÔ∏è DevOps Tools</h3>
                    <ul class="resource-list">
                        <li>
                            <a href="https://hub.docker.com/" target="_blank">
                                <strong>Docker Hub</strong>
                                <span class="resource-type">Registry</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.jenkins.io/doc/" target="_blank">
                                <strong>Jenkins Documentation</strong>
                                <span class="resource-type">Documentation</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://kubernetes.io/docs/" target="_blank">
                                <strong>Kubernetes Docs</strong>
                                <span class="resource-type">Documentation</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://docs.ansible.com/" target="_blank">
                                <strong>Ansible Documentation</strong>
                                <span class="resource-type">Documentation</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="resource-category">
                    <h3>üìä SPBE Reference</h3>
                    <ul class="resource-list">
                        <li>
                            <a href="https://spbe.go.id/" target="_blank">
                                <strong>Portal SPBE Nasional</strong>
                                <span class="resource-type">Official</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <strong>Perpres 95/2018</strong>
                                <span class="resource-type">Regulation</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <strong>Roadmap SPBE Nasional</strong>
                                <span class="resource-type">Documentation</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <strong>Permen PANRB 59/2020</strong>
                                <span class="resource-type">Regulation</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="resource-category">
                    <h3>üìñ Cheat Sheets</h3>
                    <ul class="resource-list">
                        <li>
                            <a href="#">
                                <strong>Linux Command Cheat Sheet</strong>
                                <span class="resource-type">Guide</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <strong>Git Commands Cheat Sheet</strong>
                                <span class="resource-type">Guide</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <strong>PostgreSQL Quick Reference</strong>
                                <span class="resource-type">Guide</span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <strong>Docker Commands Reference</strong>
                                <span class="resource-type">Guide</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Quiz Pembelajaran</h3>
                <button class="modal-close" onclick="app.closeQuiz()">√ó</button>
            </div>
            <div class="modal-body">
                <div id="quiz-content">
                    <!-- Quiz questions will be dynamically generated -->
                </div>
                <div id="quiz-result" class="quiz-result hidden">
                    <h3 id="result-title"></h3>
                    <p id="result-message"></p>
                    <div class="result-score">
                        <span id="result-score"></span>
                    </div>
                    <button class="btn btn--primary" onclick="app.closeQuiz()">Selesai</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content auth-modal">
            <div class="modal-header">
                <div class="auth-tabs">
                    <button id="auth-tab-login" class="auth-tab active" onclick="app.switchAuthTab('login')">Masuk</button>
                    <button id="auth-tab-register" class="auth-tab" onclick="app.switchAuthTab('register')">Daftar</button>
                </div>
                <button class="modal-close" onclick="app.closeAuthModal()">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Login Form -->
                <div id="auth-login-content" class="auth-content active">
                    <form id="login-form" onsubmit="app.handleLogin(event)">
                        <div class="form-group">
                            <label for="login-email">Email</label>
                            <input type="email" id="login-email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" class="form-control" required>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn--primary btn--full-width">
                                <i class="fas fa-sign-in-alt"></i> Masuk
                            </button>
                            <button type="button" class="btn btn--outline btn--full-width" onclick="app.handleGoogleSignIn()">
                                <i class="fab fa-google"></i> Masuk dengan Google
                            </button>
                        </div>
                        <div class="auth-links">
                            <button type="button" class="btn-link" onclick="app.useDemoAccount()">
                                <i class="fas fa-user"></i> Gunakan Akun Demo
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Register Form -->
                <div id="auth-register-content" class="auth-content">
                    <form id="register-form" onsubmit="app.handleRegister(event)">
                        <div class="form-group">
                            <label for="register-email">Email *</label>
                            <input type="email" id="register-email" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="register-password">Password *</label>
                            <input type="password" id="register-password" class="form-control" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="register-fullname">Nama Lengkap *</label>
                            <input type="text" id="register-fullname" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="register-nip">NIP</label>
                            <input type="text" id="register-nip" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="register-jabatan">Jabatan</label>
                            <input type="text" id="register-jabatan" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="register-unit">Unit Kerja</label>
                            <input type="text" id="register-unit" class="form-control">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn--primary btn--full-width">
                                <i class="fas fa-user-plus"></i> Daftar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Certificate Modal -->
    <div id="certificate-modal" class="modal">
        <div class="modal-content certificate-content">
            <button class="modal-close" onclick="app.closeCertificate()">√ó</button>
            <div class="certificate">
                <div class="certificate-border">
                    <h2>üéì Sertifikat Penyelesaian</h2>
                    <p class="certificate-text">Diberikan kepada</p>
                    <h3 class="certificate-name">PNS Pranata Komputer</h3>
                    <p class="certificate-text">Telah menyelesaikan</p>
                    <h4 id="certificate-level" class="certificate-level"></h4>
                    <p class="certificate-text">Diskominfo Kabupaten Aceh Tengah</p>
                    <div class="certificate-badge" id="certificate-badge"></div>
                    <p class="certificate-date" id="certificate-date"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Memuat...</p>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Scripts -->
    <script src="config/supabase.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/progress.js"></script>
    <script src="js/certificate.js"></script>
    <script src="js/video.js"></script>
    <script src="app.js"></script>
    <script>
        // Initialize all managers
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Show loading
                document.getElementById('loading-overlay').style.display = 'flex';
                
                // Initialize managers
                await authManager.initialize();
                await progressManager.initialize();
                await certificateManager.initialize();
                
                // Initialize app
                if (window.app) {
                    window.app.init();
                }
                
                // Hide loading
                document.getElementById('loading-overlay').style.display = 'none';
            } catch (error) {
                console.error('Initialization error:', error);
                document.getElementById('loading-overlay').style.display = 'none';
                
                // Show error notification
                if (window.authManager) {
                    window.authManager.showNotification('Terjadi kesalahan saat memuat aplikasi', 'error');
                }
            }
        });
    </script>
</body>
</html>